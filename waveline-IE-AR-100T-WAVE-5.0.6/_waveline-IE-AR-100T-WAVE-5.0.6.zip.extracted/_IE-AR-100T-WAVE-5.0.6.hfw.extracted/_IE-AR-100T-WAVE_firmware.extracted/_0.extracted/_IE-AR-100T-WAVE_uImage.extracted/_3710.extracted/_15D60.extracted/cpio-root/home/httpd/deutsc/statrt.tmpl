<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="author" content="Henry Jesuiter, Enrico Kalliwoda">
<meta name="description" content="English toc-page of the IAR / Heyfra GmbH">
<meta name="date" content="2005-06-10 11:00:00">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-store">
<meta http-equiv="expires" content="0">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>Statische Routen</title>
<link rel="stylesheet" type="text/css" href="css/stile.css" media="screen">
<script src="deutsc/auxfunc.js" type="text/javascript"></script>
<script type="text/javascript">
<!--

  function choose(index) {
    for(i=0;i<document.baseForm.route_list.length;++i) {
      document.baseForm.route_list.options[i].selected=false;
      document.baseForm.gway_list.options[i].selected=false;
      document.baseForm.masq_list.options[i].selected=false;
    }
    document.baseForm.route_list.options[index].selected=true;
    document.baseForm.gway_list.options[index].selected=true;
    document.baseForm.masq_list.options[index].selected=true;
  }

  function addEntry() {
    var ip=document.baseForm.route_new.value;
    var sig=document.baseForm.route_sig.value;
    var gw=document.baseForm.route_gway.value;
    var msq= document.baseForm.route_masq.checked ? "yes" : "no";
//    var mask=document.baseForm.route_.value;


    if ((gw.length != 0) && isValidIP(gw)) {
      if((ip.length != 0) && isValidNet(ip)) {
        if(sig.length != 0 && !isNaN(sig) && (sig >= 0) && (sig <= 32)) {
          var netentry=new Option(ip + "/" + sig, ip + "/" + sig, false, false);
          var gwentry=new Option(gw, gw, false, false);
          var msqentry=new Option(msq, msq, false, false);
          document.baseForm.route_list.options[document.baseForm.route_list.length]=netentry;
          document.baseForm.gway_list.options[document.baseForm.gway_list.length]=gwentry;
          document.baseForm.masq_list.options[document.baseForm.masq_list.length]=msqentry;
          document.baseForm.routelist.value=document.baseForm.routelist.value + ip + "/" + sig + " ";
          document.baseForm.gwaylist.value=document.baseForm.gwaylist.value + gw + " ";
          document.baseForm.masqlist.value=document.baseForm.masqlist.value + msq + " ";
        } else {
          alert("Bitte geben Sie eine korrekte Anzahl der signifikanten Bits an!");
          document.baseForm.route_sig.focus();;
        }
      } else {
        alert("Bitte geben Sie eine korrekte Netzwerkadresse an!");
        document.baseForm.route_new.focus();;
      }
    } else {
      alert("Bitte geben Sie einen korrekten Gateway an!");
      document.baseForm.route_gway.focus();;
    }
  }

  function delEntry() {
    if(document.baseForm.route_list.selectedIndex != -1) {
      var index=document.baseForm.route_list.selectedIndex;
      var nets=document.baseForm.routelist.value;
      var gws=document.baseForm.gwaylist.value;
      var msqs=document.baseForm.masqlist.value;
      var netArray=nets.split(" ");
      var gwArray=gws.split(" ");
      var msqArray=msqs.split(" ");
      var newnets="";
      var newgws="";
      var newmsqs="";
      for (i=0; i<document.baseForm.route_list.length; ++i) {
        if (i != index) {
          newnets = newnets + netArray[i] + " ";
          newgws = newgws + gwArray[i] + " ";
          newmsqs = newmsqs + msqArray[i] + " ";
        }
      }
      document.baseForm.route_list.options[index]=null;
      document.baseForm.gway_list.options[index]=null;
      document.baseForm.masq_list.options[index]=null;
      document.baseForm.routelist.value=newnets;
      document.baseForm.gwaylist.value=newgws;
      document.baseForm.masqlist.value=newmsqs;
    } else {
      alert("Sie haben keinen zu loeschenden Eintrag ausgewaehlt!");
    }
  }

  function checkDefGWItf() {
    if(document.baseForm.default_GW_itf.options[0].selected == true) {
      // we are using an ethernet gateway
      document.baseForm.default_GW_ip.disabled=false;
    } else {
      document.baseForm.default_GW_ip.disabled=true;
    }
  }


//-->
</script>
</head>
<body>
<form action="config.cgi" method="post" target="Main" name="baseForm">
  <input type="hidden" name="lang" value="deutsc">
  <input type="hidden" name="item" value="30">
  <input type="hidden" name="act" value="1">
  <fieldset><legend>Default Gateway</legend>
  <table>
  <tr>
    <td>Default-Gateway</td>
    <td> <select name="default_GW_itf" size="1" onchange=checkDefGWItf()> {DEFAULT_GW_ITF} </select></td>
    <td>Schnittstelle des default Gateways</td>
  </tr>
  <tr>
    <td>Gateway</td>
    <td><input type="text" size="15" maxlength="25" name="default_GW_ip" value="{DEFAULT_GW_IP}" {GW_ENABLE}></td>
    <td>IP-Adresse des Gateways</td>
  </tr>
  </table>
  </fieldset>
  <fieldset><legend>statische Routen</legend>
  <table>
  <tr>
    <td>Netzwerk</td>
    <td><input type="text" size="15" maxlength="15" name="route_new">/&nbsp;
        <input type="text" size="2" maxlength="2" name="route_sig"></td>
  </tr>
  <tr>
    <td>Gateway</td>
    <td><input type="text" size="15" maxlength="15" name="route_gway"></td>
  </tr>
  <tr>
    <td>maskieren</td>
    <td><input type="checkbox" name="route_masq"></td>
  </tr>
  <tr>
    <td colspan="2">
      <input type="button" name="AddRoute_Button" value="Hinzuf&uuml;gen" onclick="addEntry();">
    </td>
  </tr>
  </table>
  <hr>
  <table>
  <tr><th colspan="3">aktuelle Routen</th></tr>
  <tr><td>Netzwerk</td><td>Gateway</td><td>maskiert</td></tr>
  <tr>
    <td><select name="route_list" size="4" onchange="choose(document.baseForm.route_list.selectedIndex);">{ROUTEOPTS}
    </select></td>
    <td><select name="gway_list" size="4" onchange="choose(document.baseForm.gway_list.selectedIndex);">{GWAYOPTS}
    </select></td>
    <td><select name="masq_list" size="4" onchange="choose(document.baseForm.masq_list.selectedIndex);">{MASQOPTS}
    </select></td>
    </tr>
    <tr>
    <td colspan=3>
      <input type="button" name="DelRoute_Button" value="L&ouml;schen" onclick="delEntry();">
    </td>
    </tr>
    <tr>
     <td>
      <input type="hidden" name="routelist" value="{ROUTELIST}">
      <input type="hidden" name="gwaylist" value="{GWAYLIST}">
      <input type="hidden" name="masqlist" value="{MASQLIST}">
    </td>
  </tr>
  </table>
  </fieldset>
  <table align="right">
    <tr>
      <td><input type="reset" name="Cancel_Button" value="Abbrechen"></td>
      <td><input type="submit" name="OK_Button" value="&Uuml;bernehmen"></td>
    </tr>
    </table>
  </form>
</body>
</html>
