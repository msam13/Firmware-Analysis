<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="author" content="Henry Jesuiter, Enrico Kalliwoda, W.-R. Juergens">
<meta name="description" content="WavelineRouter EIRM-100T / Heyfra GmbH">
<meta name="date" content="2005-06-10 11:00:00">
<meta http-equiv="expires" content="0">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="cache-control" content="no-store">
<meta http-equiv="pragma" content="no-cache">
<title>IAR-Konfiguration: MAPPING</title>
<link rel="stylesheet" type="text/css" href="css/stile.css" media="screen">
<script src="deutsc/auxfunc.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
  var Anzahl={COUNT};

  function checkState() {
    if(document.vmpForm.vmap_interface.options[0].selected==true) {
      document.vmpForm.ip2m.disabled=true;
      document.vmpForm.m2ip.disabled=true;
      document.vmpForm.ip2m_list.disabled=true;
      document.vmpForm.m2ip_list.disabled=true;
      document.vmpForm.Add_Button.disabled=true;
      document.vmpForm.Del_Button.disabled=true;
    } else {
      document.vmpForm.ip2m.disabled=false;
      document.vmpForm.m2ip.disabled=false;
      document.vmpForm.ip2m_list.disabled=false;
      document.vmpForm.m2ip_list.disabled=false;
      document.vmpForm.Add_Button.disabled=false;
      document.vmpForm.Del_Button.disabled=false;
    }
  }

  function choose(index) {
   for(i=0;i<document.vmpForm.ip2mlist.length;++i) {
       document.vmpForm.ip2m_list.options[i].selected=false;
       document.vmpForm.m2ip_list.options[i].selected=false;
    }

   document.vmpForm.m2ip_list.options[index].selected=true;
   document.vmpForm.ip2m_list.options[index].selected=true;
  }

  function addEntry() {
    var ip1=document.vmpForm.ip2m.value;
    var ip2=document.vmpForm.m2ip.value;

	if (Anzahl < 20)
	{
    	if ( (ip1.length != 0) && isValidIP(ip1) &&
			(ip2.length != 0) && isValidIP(ip2)) {
        	var newIP2M = new Option(ip1, ip1,false,false);
        	var newM2IP = new Option(ip2, ip2,false,false);

		document.vmpForm.ip2m_list.options[document.vmpForm.ip2m_list.length]=newIP2M;
		document.vmpForm.m2ip_list.options[document.vmpForm.m2ip_list.length]=newM2IP;

		document.vmpForm.ip2mlist.value = document.vmpForm.ip2mlist.value + ip1 + " ";
		document.vmpForm.m2iplist.value = document.vmpForm.m2iplist.value + ip2 + " ";
		document.vmpForm.ip2m.value = "";
		document.vmpForm.m2ip.value = "";
    	Anzahl = Anzahl+1;
		}
		else
		alert("Bitte geben Sie die mappenden IP-Adressen an!");
    } else {
      alert("Sie koennen nur max. 20 IP-Adressen mappen ");
    }
  }

  function delEntry() {
    if(document.vmpForm.ip2m_list.selectedIndex != -1) {
      var index=document.vmpForm.ip2m_list.selectedIndex;
      var ip1s=document.vmpForm.ip2mlist.value;
      var ip2s=document.vmpForm.m2iplist.value;

      var ip1Array=ip1s.split(" ");
      var ip2Array=ip2s.split(" ");

      var newip1s="";
      var newip2s="";
      for (i=0; i<document.vmpForm.ip2m_list.length; ++i) {
      if (i != index) {
	  		newip1s = newip1s + ip1Array[i] + " ";
	  		newip2s = newip2s + ip2Array[i] + " ";
	  	}
      }
	  if (Anzahl>0)
		Anzahl = Anzahl-1;
	  else
		Anzahl=0;

      document.vmpForm.ip2m_list.options[index]=null;
      document.vmpForm.m2ip_list.options[index]=null;
      document.vmpForm.ip2mlist.value=newip1s;
      document.vmpForm.m2iplist.value=newip2s;
    } else {
      alert("Bitte waehlen Sie die zu loeschenden IP-Adressen!");
    }
  }

  function checkValues() {
    var result=true;

//-> check all before submit
    if(result==true) {
      document.vmpForm.submit();
    }
  }

//-->
</script>
</head>
<body>
<form action="config.cgi" method="post" target="Main" name="vmpForm">
  <input type="hidden" name="lang" value="deutsc">
  <input type="hidden" name="item" value="28">
  <input type="hidden" name="act" value="1">
   <fieldset><legend>Virtual Mapping (NAT)</legend>
  <table>
   <tr>
    <td>Schnittstelle</td>
    <td><select name="vmap_interface" size="1" onchange=checkState()> {INTERFACE_OPTS} </select></td>
    <td>zu mappende Schnittstelle</td>
  </tr>
  <tr>
  <td colspan="3">IP-Adressen:</td>
  <tr>
    <td><input type="text" size="15" maxlength="15" id="ip2m" name="ip2m" {VMPENABLE}></td>
    <td colspan="2">Zus&auml;tzliche IP-Adresse an der zu mappenden Schnittstelle</td>
  </tr>
  <tr>
    <td><input type="text" size="15" maxlength="15" id="m2ip" name="m2ip" {VMPENABLE}></td>
    <td colspan="2">zugeordnete, tats&auml;chlich vorhandene IP-Adresse im gegen&uuml;berliegenden Netzwerk</td>
  </tr>
  <tr>
    <td>
      <input type="button" name="Add_Button" value="Hinzuf&uuml;gen" {VMPENABLE} onclick="addEntry()"></td>
  </tr>
  </table>
  <hr>
  <h4>Virtual Maps</h4>
  <table>
  <tr><td>zus&auml;tzliche IP</td><td colspan="2">zugeordnete IP</td></tr>
  <tr>
    <td> <select name="ip2m_list" size="5" onchange="choose(document.vmpForm.ip2m_list.selectedIndex)"> {IP2MOPTIONS}
      </select> </td>
    <td> <select name="m2ip_list" size="5" onchange="choose(document.vmpForm.m2ip_list.selectedIndex)"> {M2IPOPTIONS}
      </select> </td>
      </tr><tr><td colspan=2>
      <input type="button" name="Del_Button" value="L&ouml;schen" {VMPENABLE} onclick="delEntry()">
    </td>
  </tr>
  </table>
  </fieldset>
  <input type="hidden" name="ip2mlist" value="{IP2MLIST}">
  <input type="hidden" name="m2iplist" value="{M2IPLIST}">
  <table align="right">
  <tr>
    <td> <input type="reset" name="Cancel_Button" value="Abbrechen"> </td>
    <td> <input type="button" name="OK_Button" value="&Uuml;bernehmen" onclick="checkValues()"> </td>
  </tr>
  </table>
</form>
</body>
</html>
