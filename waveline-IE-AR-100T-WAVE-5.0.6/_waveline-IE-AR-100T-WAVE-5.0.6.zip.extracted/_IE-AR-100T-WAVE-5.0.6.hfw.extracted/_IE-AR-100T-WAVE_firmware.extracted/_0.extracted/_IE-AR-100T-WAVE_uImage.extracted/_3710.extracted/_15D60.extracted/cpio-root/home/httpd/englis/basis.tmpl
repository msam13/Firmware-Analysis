

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="author" content="Henry Jesuiter, Enrico Kalliwoda">
<meta name="description" content="English toc-page of the IAR / Heyfra GmbH">
<meta name="date" content="2005-06-10 11:00:00">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-store">
<meta http-equiv="expires" content="0">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>IAR-Configuration: System</title>
<link rel="stylesheet" type="text/css" href="css/stile.css" media="screen">
<script src="englis/auxfunc.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
  function enableIP() {
    if(document.baseForm.defaultRoute.value == "other") {
      document.baseForm.Route.disabled=false;
    } else {
      document.baseForm.Route.disabled=true;
    }
  }

  function checkHostName() {
    var liste=document.baseForm.Hostname.value.split(" ");

    document.baseForm.Hostname.value=liste[0];
    for (i = 1;i < liste.length; ++i) {
      document.baseForm.Hostname.value+=liste[i];
    }

    if (liste.length>1) {
      alert("Forbidden blanks eliminated from hostname.");
    }

    if (!isNaN(document.baseForm.Hostname.value[0])) {
      alert("Please avoid host names starting with a digit!");
      return false;
    }

    return true;
  }

  function checkIP() {
    var eth0_ip = document.baseForm.ETH0_ip.value;
    if (!isValidIP(eth0_ip)) {
      document.baseForm.ETH0_ip.focus();
      return false;
    }

    var eth1_ip=document.baseForm.ETH1_ip.value;
    if (!isValidIP(eth1_ip)) {
      document.baseForm.ETH1_ip.focus();
      return false;
    }

    if (eth0_ip == eth1_ip) {
      alert("Please avoid identic IP addresses!");
      document.baseForm.eth1_ip.focus();
      return false;
    }

    /*
     * to be moved
    ip=document.baseForm.gateway.value;
    if ( result && document.baseForm.gw.checked ) {
      if ( !isValidIP(ip)) {
          document.baseForm.gateway.focus();
          result=false;
      }
    }
    */
 
    var eth0_prefix=document.baseForm.ETH0_prefix.value;
    if(isNaN(eth0_prefix)) {
      alert("Please use a number between 0 and 32 for the netmask!");
      document.baseForm.ETH0_prefix.focus();
      return false;
    }
    if((eth0_prefix < 1) || (eth0_prefix > 31)) {
      alert("Please use a number between 0 and 32 for the netmask!");
      document.baseForm.ETH0_prefix.focus();
      return false;
    }

    var eth1_prefix=document.baseForm.ETH1_prefix.value;
    if(isNaN(eth1_prefix)) {
      alert("Please use a number between 0 and 32 for the netmask!");
      document.baseForm.ETH1_prefix.focus();
      return false;
    }
    if((eth1_prefix < 1) || (eth1_prefix > 31)) {
      alert("Please use a number between 0 and 32 for the netmask!");
      document.baseForm.ETH1_prefix.focus();
      return false;
    }

    return true;
  }

  function checkPass() {
    var rootpass=document.baseForm.Kennwort.value;
    var rerootpass=document.baseForm.KennwortRe.value;

    if((rootpass.length <= 7) && (rootpass.length != 0)) {
      alert("Please use a password consisting of at least 8 characters!");
      document.baseForm.reset();
      document.baseForm.Kennwort.focus();

      return false;
    }

    if(rootpass != rerootpass) {
      alert("The passwords are not identic. Please check!");
      document.baseForm.reset();
      document.baseForm.Kennwort.focus();

      return false;
    }

    return true;
  }
  
  function checkValues() {
    if(!checkHostName()) {
       return false;
    }

    if(!checkIP()) {
      return false;
    }

    if(!checkPass()) {
      return false
    }

    document.baseForm.submit();
  }

  function checkAllow() {
    if(document.baseForm.gw.checked == true) {
      document.baseForm.gateway.disabled=false;
    } else {
      document.baseForm.gateway.disabled=true;
    }
  }

  function checkETH0Mode() {
    if (document.baseForm.ETH0_mode.options[0].selected == true) {
      // we use a static address
      document.baseForm.ETH0_ip.disabled=false;
      document.baseForm.ETH0_prefix.disabled=false;
    } else {
      // we use a dynamic address on eth0
      document.baseForm.ETH0_ip.disabled=true;
      document.baseForm.ETH0_prefix.disabled=true;
      // set eth1 into static mode
      document.baseForm.ETH1_mode.options[0].selected=true;
      document.baseForm.ETH1_ip.disabled=false;
      document.baseForm.ETH1_prefix.disabled=false;
    }
  }

  function checkETH1Mode() {
    if (document.baseForm.ETH1_mode.options[0].selected == true) {
      // we use a static address
      document.baseForm.ETH1_ip.disabled=false;
      document.baseForm.ETH1_prefix.disabled=false;
    } else {
      // we use a dynamic address on eth1
      document.baseForm.ETH1_ip.disabled=true;
      document.baseForm.ETH1_prefix.disabled=true;
      //set eth0 into static mode
      document.baseForm.ETH0_mode.options[0].selected=true;
      document.baseForm.ETH0_ip.disabled=false;
      document.baseForm.ETH0_prefix.disabled=false;
    }
  }

  function isValidMask(mask) {
    var result=true;
    var numbers=mask.split(".");
    if(numbers.length !=4) {
      result=false;
    } else {
      for(i=0;i<numbers.length;++i) {
        if(isNaN(numbers[i]) || (numbers[i]<0) || (numbers[i]>255)) {
          result=false;
          break;
        }
      }
    }
    return result;
  }

//-->
</script>
</head>
<body>
<form action="config.cgi" method="post" target="Main" name="baseForm">
  <input type="hidden" name="lang" value="englis">
  <input type="hidden" name="item" value="24">
  <input type="hidden" name="act" value="1">
  <table>
    <tr>
    <td>Hostname</td>
    <td> <input type="text" size="20" maxlength="25" name="Hostname" value="{HOSTNAME}"> </td>
    <td>the router's name</td>
  </tr>
  <tr>
    <td>Domain</td>
    <td> <input type="text" size="20" maxlength="50" name="Domainname" value="{DOMAINNAME}"> </td>
      <td>the router's domain</td>
    </tr>
  </table>
  <fieldset><legend>LAN</legend>
  <table>
    <tr>
      <td> Addressmode </td>
      <td> <select name="ETH0_mode" size="1" onchange=checkETH0Mode()> {ETH0_MODE} </select></td>
    </tr>
    <tr>
      <td>IP address</td>
      <td> <input type="text" size="15" maxlength="15" name="ETH0_ip" value="{ETH0_IP}" {ETH0_ENABLE}></td>
      <td colspan="2">/&nbsp;<input type="text" size="2" maxlength="2" name="ETH0_prefix" value="{ETH0_PREFIX}" {ETHO_ENABLE}> </td>
    </tr>
    <tr>
      <td>masquerade subnet</td>
      <td><input type="checkbox" name="ETH0_masq" value="yes" {ETH0_MASQ} {ETH0_ENABLE}></td>
    </tr>
  </table>
  </fieldset>
  <fieldset><legend>WAN</legend>
  <table>
    <tr>
      <td> Addressmode </td>
      <td> <select name="ETH1_mode" size="1" onchange=checkETH1Mode()> {ETH1_MODE} </select></td>
    </tr>
    <tr>
      <td>IP address</td>
      <td> <input type="text" size="15" maxlength="15" name="ETH1_ip" value="{ETH1_IP}" {ETH1_ENABLE}></td>
      <td colspan="2">/&nbsp;<input type="text" size="2" maxlength="2" name="ETH1_prefix" value="{ETH1_PREFIX}" {ETH1_ENABLE}> </td>
    </tr>
    <tr>
      <td>masquerade subnet</td>
      <td><input type="checkbox" name="ETH1_masq" value="yes" {ETH1_MASQ} {ETH1_ENABLE}></td>
    </tr>
  </table>
  </fieldset>
  <fieldset><legend>System Access</legend>
  <table>
    <tr>
      <td>Password</td>
      <td> <input type="password" size="15" maxlength="12" name="Kennwort" value=""></td>
      <td>password for administrator access</td>
    </tr>
    <tr>
      <td>Password (re-enter)</td>
      <td> <input type="password" size="15" maxlength="12" name="KennwortRe" value=""></td>
      <td>password for administrator access (re-entered)</td>
    </tr>
  </table>
  </fieldset>
  <table align="right">
    <tr>
      <td><input type="reset" name="Cancel_Button" value="Cancel"></td>
      <td><input type="button" name="OK_Button" value="Apply" onclick="checkValues()"></td>
    </tr>
    </table>
  </form>
</body>
</html>
