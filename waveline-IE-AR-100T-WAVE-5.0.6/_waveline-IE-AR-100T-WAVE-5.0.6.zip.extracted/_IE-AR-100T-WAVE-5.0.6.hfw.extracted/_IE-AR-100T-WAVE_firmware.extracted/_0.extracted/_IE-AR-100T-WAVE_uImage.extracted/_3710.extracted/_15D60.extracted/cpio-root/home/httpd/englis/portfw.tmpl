

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="author" content="Enrico Kalliwoda">
<meta name="description" content="English toc-page of the IAR / Heyfra GmbH">
<meta name="date" content="2005-06-10 11:00:00">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-store">
<meta http-equiv="expires" content="0">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>Port forwarding</title>
<link rel="stylesheet" type="text/css" href="css/stile.css" media="screen">
<script src="englis/auxfunc.js" type="text/javascript"></script>
<script type="text/javascript">
<!--

  function choose(index) {
   for(i=0;i<document.portForm.port_list.length;++i) {
       document.portForm.port_list.options[i].selected=false;
       document.portForm.prot_list.options[i].selected=false;
       document.portForm.target_list.options[i].selected=false;
    }
   document.portForm.port_list.options[index].selected=true;
   document.portForm.prot_list.options[index].selected=true;
   document.portForm.target_list.options[index].selected=true;
  }

  function addEntry() {
    var port=document.portForm.port.value;
    var prot=document.portForm.portfw_protocol.options[document.portForm.portfw_protocol.options.selectedIndex].text;
    var ip=document.portForm.destip.value;

    if(port.length != 0) {
      if((ip.length != 0)) {
        var newPort = new Option(port, port, false, false);
	var newProt = new Option(prot, prot, false, false);
        var newTarget = new Option(ip, ip, false, false);

	document.portForm.port_list.options[document.portForm.port_list.length]=newPort;
	document.portForm.prot_list.options[document.portForm.prot_list.length]=newProt;
	document.portForm.target_list.options[document.portForm.target_list.length]=newTarget;

	document.portForm.portlist.value = document.portForm.portlist.value + port + " ";
	document.portForm.protlist.value = document.portForm.protlist.value + prot + " ";
	document.portForm.targetlist.value = document.portForm.targetlist.value + ip + " ";
      }
    } else {
      alert("Bitte geben Sie eine hinzuzufuegende Portnummer/Zieladresse an!")
    }
  }

  function delEntry() {
    if(document.portForm.port_list.selectedIndex != -1) {
      var index=document.portForm.port_list.selectedIndex;

      var ports=document.portForm.portlist.value;
      var prots=document.portForm.protlist.value;
      var ips=document.portForm.targetlist.value;

      var portArray=ports.split(" ");
      var protArray=prots.split(" ");
      var ipArray=ips.split(" ");

      var newports="";
      var newprots="";
      var newips="";
      for (i=0; i<document.portForm.port_list.length; ++i) {
        if (i != index) {
	  newports = newports + portArray[i] + " ";
	  newprots = newprots + protArray[i] + " ";
	  newips = newips + ipArray[i] + " ";
	}
      }

      document.portForm.port_list.options[index]=null;
      document.portForm.prot_list.options[index]=null;
      document.portForm.target_list.options[index]=null;
      document.portForm.portlist.value=newports;
      document.portForm.protlist.value=newprots;
      document.portForm.targetlist.value=newips;
    } else {
      alert("Bitte waehlen Sie den zu loeschenden Eintrag!");
    }
  }

//-->
</script>
</head>
<body>
<form action="config.cgi" method="post" target="Main" name="portForm">
  <input type="hidden" name="lang" value="englis">
  <input type="hidden" name="item" value="31">
  <input type="hidden" name="act" value="1">
<fieldset><legend>Port forwarding</legend>
<table>
<tr>
  <td>Address:port</td>
  <td><input type="text" size="20" maxlength="27" name="port"></td>
    <td>&lt;NAT address&gt;:&lt;port&gt; to redirect</td>
</tr>
<tr>
  <td>Protocol</td>
  <td><select name="portfw_protocol" size="1">
    <option>tcp</option>
    <option>udp</option>
  </select></td>
</tr>
<tr>
    <td>real address:port</td>
  <td><input type="text" size="20" maxlength="27" name="destip"></td>
    <td>&lt;IP address&gt;:&lt;port&gt; to redirect packets to</td>
</tr>
<tr>
  <td colspan="3"><input type="button" name="AddPortFw_Button" value="Add"  onclick="addEntry()"></td>
</tr>
</table>
<hr>
<table>
<tr>
  <th colspan="3">Redirected ports</th>
</tr><tr>
  <td>packet's target</td><td>protocol</td><td>forwarded to</td>
</tr><tr>
  <td><select name="port_list" size="4" onchange="choose(document.portForm.port_list.selectedIndex)">{PORTOPTS}
  </select></td>
  <td><select name="prot_list" size="4" onchange="choose(document.portForm.prot_list.selectedIndex)">{PROTOPTS}
  </select></td>
  <td><select name="target_list" size="4" onchange="choose(document.portForm.target_list.selectedIndex)">{TARGOPTS}
  </select></td>
  </tr><tr><td colspan="3">
     <input type="button" name="DelPortFw_Button"  value="Delete"  onclick="delEntry()">
  </td>
</tr>
</table>
</fieldset>
  <input type="hidden" name="portlist" value="{PORTLIST}">
  <input type="hidden" name="protlist" value="{PROTLIST}">
  <input type="hidden" name="targetlist" value="{TARGLIST}">
  <table align="right">
    <tr>
      <td><input type="reset" name="Cancel_Button" value="Cancel"></td>
      <td><input type="submit" name="OK_Button" value="Apply"></td>
    </tr>
    </table>
  </form>
</body>
</html>
